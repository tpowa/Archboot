<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="Archboot Project - Additional Arch Linux ISOs And UKIs">
  <title>Archboot - Additional Arch Linux ISOs And UKIs</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="archboot.png">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><span><img src="logo.png" alt="Logo"></span></p>
<h1>Archboot Home | <a href="gallery.html">Gallery</a> | <a href="https://donate.stripe.com/fZu6oHc9T48TeTrg5HcV200"><img src="donate.png" alt="Donate"></a></h1>
<h2>2025 Fundraise: 0% <progress max="100" value="60">0%</progress> 100%</h2>
<p><strong>&copy; 2006 - 2025 | <a href=mailto:tpowa@archlinux.org>Tobias Powalowski</a></strong> | Arch Linux Developer <strong><a href="https://archlinux.org/people/developers/#tpowa">tpowa</a></strong><br>
<strong>Last update: 01.11.2025 16:52</strong></p>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#introduction" id="toc-introduction"><strong><span class="toc-section-number">1.</span> Introduction</strong></a></li>
<li><a href="#releases" id="toc-releases"><strong><span class="toc-section-number">2.</span> Releases</strong></a></li>
<li><ul>
<li><a href="#image-types" id="toc-features-of-the-images"><span class="toc-section-number">2.1</span> ISO / Initramfs / UKI Types</a></li>
<li><a href="#ipxe-boot" id="toc-ipxe-boot"><span class="toc-section-number">2.2</span> Netboot - IPXE</a></li>
<li><a href="#boot-modes" id="toc-boot-modes"><span class="toc-section-number">2.3</span> Boot Modes</a></li>
<li><a href="#writing-to-usb-cd" id="toc-writing-to-usb-cd"><span class="toc-section-number">2.4</span> ISO Writing To USB / CD</a></li>
</ul></li>
<li><a href="#archboot-in-a-nutshell" id="toc-archboot-in-a-nutshell"><strong><span class="toc-section-number">3.</span> Features In A Nutshell</strong></a></li>
<li><ul>
<li><a href="#secure-boot-support" id="toc-secure-boot-support"><span class="toc-section-number">3.1</span> Secure Boot - MOK / Machine Owner Key</a></li>
<li><a href="#terminal-access" id="toc-terminal-access"><span class="toc-section-number">3.2</span> Terminal Access - Virtual Consoles / Serial Console</a></li>
<li><a href="#remote-terminal-access" id="toc-remote-terminal-access"><span class="toc-section-number">3.3</span> Remote Terminal Access - OpenSSH / HTTP Browser Terminal</a></li>
<li><a href="#interactive-basic-setup" id="toc-interactive-basic-setup"><span class="toc-section-number">3.4</span> Interactive Basic Setup</a></li>
<li><a href="#interactive-launcher" id="toc-interactive-launcher"><span class="toc-section-number">3.5</span> Interactive Launcher</a></li>
<li><a href="#interactive-setup" id="toc-interactive-setup"><span class="toc-section-number">3.6</span> Interactive Setup</a></li>
<li><a href="#system-configuration" id="toc-system-configuration"><span class="toc-section-number">3.7</span> System Configuration On Installed System</a></li></ul>
<li><a href="#for-experts" id="toc-for-experts"><strong><span class="toc-section-number">4.</span> For Experts / Powerusers</strong></a></li>
<li><ul>
<li><a href="#quickinst-installation" id="toc-quickinst-installation"><span class="toc-section-number">4.1</span> Quickinst Installation</a></li>
<li><a href="#cli-manage-archboot" id="toc-manage-archboot"><span class="toc-section-number">4.2</span> CLI Manage Environment</a></li>
<li><a href="#autorun" id="toc-autorun"><span class="toc-section-number">4.3</span> Custom Autorun Script</a></li>
<li><a href="#automatic-install" id="toc-automatic-install"><span class="toc-section-number">4.4</span> Automatic Installation</a></li>
<li><a href="#tools-for-backup-and-copying-of-an-existing-system" id="toc-tools-for-backup-and-copying-of-an-existing-system"><span class="toc-section-number">4.5</span> Tools For Backup And Copying Of An Existing System</a></li>
<li><a href="#restoring-an-usb-device-to-fat32-state" id="toc-restoring-an-usb-device-to-fat32-state"><span class="toc-section-number">4.6</span> Restoring An USB Device To FAT32 State</a></li>
<li><a href="#clean-blockdevice" id="toc-clean-blockdevice"><span class="toc-section-number">4.7</span> Clean Blockdevice</a></li>
<li><a href="#debug-early-userspace" id="toc-debug-early-userspace"><span class="toc-section-number">4.8</span> Debug Early Userspace</a></li>
</ul></li>
<li><strong><a href="#faq-known-issues-and-limitations" id="toc-faq-known-issues-and-limitations"><span class="toc-section-number">5.</span> FAQ / Known Issues / Limitations</a></strong></li>
<li><strong><a href="#archiso" id="toc-archiso"><span class="toc-section-number">6.</span> Comparison To Archiso Image</a></strong></li>
<li><strong><a href="#development" id="toc-development"><span class="toc-section-number">7.</span> Development: GIT And Bugtracker</a></strong></li>
<li><a href="#package-installation" id="toc-usage"><strong><span class="toc-section-number">8.</span> Package - Repository / Installation / Usage</strong></a>
<li><ul>
<li><a href="#create-rescue-system" id="toc-create-rescue-system"><span class="toc-section-number">8.1</span> Create Rescue System Out Of The Running System</a></li>
<li><a href="#create-image-files" id="toc-create-image-files"><span class="toc-section-number">8.2</span> Create Image Files</a>
<li><a href="#setting-up-an-archboot-image-server" id="toc-setting-up-an-archboot-image-server"><span class="toc-section-number">8.3</span> Setting Up An Image Server</a></li>
</ul></li>
<li><a href="#testing-image-and-files-with-qemu" id="toc-testing-image-and-files-with-qemu"><strong><span class="toc-section-number">9.</span> Testing Image And Files With QEMU</strong></a></li>
<li><ul>
<li><a href="#running-aarch64" id="toc-running-aarch64"><span class="toc-section-number">9.1</span> Running AARCH64</a></li>
<li><a href="#running-riscv64" id="toc-running-riscv64"><span class="toc-section-number">9.2</span> Running RISCV64</a></li>
<li><a href="#running-x86_64" id="toc-running-x86-64"><span class="toc-section-number">9.3</span> Running X86_64</a></li>
<li><a href="#additional-qemu-parameters" id="toc-additional-qemu-parameters"><span class="toc-section-number">9.4</span> Additional Qemu Parameters</a></li>
<li><a href="#hwsim" id="toc-hwsim"><span class="toc-section-number">9.5</span> Setting Up A Hwsim SSID</a></li>
</ul></li>
<li><strong><a href="#arch-linux-wiki" id="toc-arch-linux-wiki"><span class="toc-section-number">10.</span> Arch Linux Wiki</a></strong></li>
<li><strong><a href="#project-links" id="toc-project-links"><span class="toc-section-number">11.</span> Project Links</a></strong></li>
<li><strong><a href="#videos" id="toc-videos"><span class="toc-section-number">12.</span> Videos</a></strong></li>
<li><strong><a href="#history" id="toc-history"><span class="toc-section-number">13.</span> History</a></strong></li>
<li><strong><a href="#references" id="toc-references"><span class="toc-section-number">14.</span> References</a></strong></li>
</ul>
</nav>
<h2 data-number="1" id="introduction"><span class="header-section-number">1.</span> Introduction</h2>
<p><strong>Archboot</strong> is a most advanced, modular <a href="https://archlinux.org/"><strong>Arch Linux</strong></a> boot/install image creation
utility to generate <strong>reproducible</strong> bootable media for <strong>UKI/CD/USB/PXE</strong>, designed for <strong>installation</strong> or <strong>rescue</strong> operation.The <strong><a href="#archiso">additional</a> ISOs</strong> and <strong>UKIs</strong> focus on being <strong>small, fast</strong> and <strong>(power)user friendly</strong>.</p>
<p style="page-break-after: always"></p>
<h2 data-number="2" id="releases"><span class="header-section-number">2.</span> Releases</h2>
<ul>
<li><a href="https://www.reddit.com/r/archboot/"><strong>Latest News</strong></a>, <a href="https://gitlab.archlinux.org/tpowa/archboot/-/blob/master/CHANGELOG"><strong>Changelog</strong></a>, <a href="https://source.archboot.com"><strong>Build Sources</strong></a></li>
<li><strong>IRC Support Channel</strong>: <strong>#archboot</strong> on irc.libera.chat</li>
<li><strong>Automatic Release System</strong>: Packages for triggering a new release are listed <a href="https://gitlab.archlinux.org/tpowa/archboot/-/blob/master/etc/archboot/server-update.conf"><strong>here</strong></a>.</li>
<li><a href="https://wiki.syslinux.org/wiki/index.php?title=Isohybrid"><strong>Hybrid images</strong></a>, <a href="https://wiki.archlinux.org/title/Unified_kernel_image" title="UKI"><strong>Unified Kernel Images</strong></a>, <a href="https://wiki.archlinux.org/title/Netboot" title="Netboot"><strong>Netboot images</strong></a>, <a href="https://wiki.archlinux.org/title/Kernel" title="Kernel"><strong>Kernels</strong></a>, <a href="https://wiki.archlinux.org/title/Initramfs" title="Initramfs"><strong>Initramfs</strong></a>, and <a href="https://wiki.archlinux.org/title/Microcode" title="Microcode"><strong>Microcodes</strong></a> are provided.</li>
<li><strong>PGP KEY</strong>: <a href="https://keyserver.ubuntu.com/pks/lookup?op=vindex&amp;fingerprint=on&amp;exact=on&amp;search=0x5B7E3FB71B7F10329A1C03AB771DF6627EDF681F"><strong>5B7E 3FB7 1B7F 1032 9A1C 03AB 771D F662 7EDF 681F</strong></a> for file verification is provided.</li>
<li><strong>Supported Glibc Locales</strong>: be, bg, cs, da, de, en, el, es, fi, fr, hu, it, lt, lv, mk, nl, nn, pl, pt, ro, ru, sk, sr, sv, tr, uk</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Arch Linux Distribution</th>
<th>Release</th>
<th>B2SUM</th>
<th>Archive</th>
<th>Forum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://archlinuxarm.org/"><strong>ARM - aarch64</strong></a><sup>1</sup></td>
<td><a href="https://release.archboot.com/aarch64/latest/Release.txt"><strong>Packages</strong></a></td>
<td><a href="https://release.archboot.com/aarch64/latest/b2sum.txt"><strong>Check</strong></a></td>
<td><a href="https://release.archboot.com/aarch64"><strong>Browse</strong></a></td>
<td><a href="https://archlinuxarm.org/forum/viewtopic.php?f=8&amp;t=15777"><strong>Check</strong></a></td>
</tr>
<tr class="even">
<td><a href="https://archriscv.felixc.at/"><strong>RISC-V - riscv64</strong></a><sup>2</sup></td>
<td><a href="https://release.archboot.com/riscv64/latest/Release.txt"><strong>Packages</strong></a></td>
<td><a href="https://release.archboot.com/riscv64/latest/b2sum.txt"><strong>Check</strong></a></td>
<td><a href="https://release.archboot.com/riscv64"><strong>Browse</strong></a></td>
<td></td>
</tr>
<tr class="odd">
<td><a href="https://archlinux.org/"><strong>X64 - x86_64</strong></a><sup>3</sup></td>
<td><a href="https://release.archboot.com/x86_64/latest/Release.txt"><strong>Packages</strong></a></td>
<td><a href="https://release.archboot.com/x86_64/latest/b2sum.txt"><strong>Check</strong></a></td>
<td><a href="https://release.archboot.com/x86_64"><strong>Browse</strong></a></td>
<td><a href="https://bbs.archlinux.org/viewtopic.php?id=182439"><strong>Check</strong></a></td>
</tr>
</tbody>
</table>
<p><sup>1</sup> Supports <strong>aarch64, Apple Mac M1 and higher</strong> for virtual machines eg. <a href="https://wiki.archlinux.org/title/Parallels_Desktop" title="Parallels Desktop"><strong>Parallels Desktop</strong></a>, <a href="https://mac.getutm.app/" title="UTM MacOS"><strong>UTM</strong></a> and <a href="https://wiki.archlinux.org/title/VMware" title="VMware"><strong>VMware</strong></a><br>
<sup>2</sup> Supports <strong>riscv64</strong> and needs <a href="https://www.denx.de/wiki/U-Boot" title="U-Boot"><strong>U-Boot</strong></a> to launch. Recommended <strong>only</strong> for testing in a virtual machine.<br>
<sup>3</sup> Supports <strong>x86_64</strong>. Use it for <strong>real</strong> machines <strong>and/or</strong> virtual machines.</p>
<table>
<thead>
<tr class="header">
<th>Location</th>
<th>Main Mirrors</th>
<th>Download</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>United States - MA</strong></td>
<td><a href="https://release.archboot.com"><strong>archboot.com</strong></a></td>
<td><a href="https://release.archboot.com/aarch64/latest"><strong>aarch64</strong></a> | <a href="https://release.archboot.com/riscv64/latest"><strong>riscv64</strong></a> | <a href="https://release.archboot.com/x86_64/latest"><strong>x86_64</strong></a></td>
</tr>
<tr class="even">
<td><strong>Europe - France</strong></td>
<td><a href="https://release.archboot.eu"><strong>archboot.eu</strong></a></td>
<td><a href="https://release.archboot.eu/aarch64/latest"><strong>aarch64</strong></a> | <a href="https://release.archboot.eu/riscv64/latest"><strong>riscv64</strong></a> | <a href="https://release.archboot.eu/x86_64/latest"><strong>x86_64</strong></a></td>
</tr>
<tr class="odd">
<td><strong>Asia - Indonesia</strong></td>
<td><a href="https://release.archboot.net"><strong>archboot.net</strong></a></td>
<td><a href="https://release.archboot.net/aarch64/latest"><strong>aarch64</strong></a> | <a href="https://release.archboot.net/riscv64/latest"><strong>riscv64</strong></a> | <a href="https://release.archboot.net/x86_64/latest"><strong>x86_64</strong></a></td>
</tr>
</table>
<table>
<thead>
<tr class="header">
<th>Location</th>
<th>User Hosted Mirrors</th>
<th>Download</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Germany</strong></td>
<td><a href="https://mirror.pagenotfound.de/archboot"><strong>pagenotfound.de</strong></a></td>
<td><a href="https://mirror.pagenotfound.de/archboot/aarch64/latest"><strong>aarch64</strong></a> | <a href="https://mirror.pagenotfound.de/archboot/riscv64/latest"><strong>riscv64</strong></a> | <a href="https://mirror.pagenotfound.de/archboot/x86_64/latest"><strong>x86_64</strong></a></td>
</tr>
</table>
<ul>
<li>The <a href="https://wiki.archlinux.org/title/Unified_kernel_image" title="UKI"><strong>Unified Kernel Image / UKI</strong></a> can be booted from your <a href="https://wiki.archlinux.org/title/UEFI" title="UEFI"><strong>UEFI</strong></a> firmware or <a href="https://wiki.archlinux.org/title/Bootloader" title="Bootloader"><strong>bootloader</strong></a> like any other <strong>&lt;EFI&gt;</strong> file.</li>
<li>For <strong>rescue booting</strong>, add an entry pointing to the <a href="https://wiki.archlinux.org/title/Kernel" title="Kernel"><strong>Kernel</strong></a>, <a href="https://wiki.archlinux.org/title/Initramfs" title="Initramfs"><strong>Initramfs</strong></a>, <a href="https://wiki.archlinux.org/title/Microcode" title="Microcode"><strong>Microcode</strong></a> and <strong>Firmware</strong> to your <a href="https://wiki.archlinux.org/title/Bootloader" title="Bootloader"><strong>bootloader</strong></a>.</li>
<li>For <a href="https://wiki.archlinux.org/title/PXE" title="PXE"><strong>PXE</strong></a> booting, add the <a href="https://wiki.archlinux.org/title/Kernel" title="Kernel"><strong>Kernel</strong></a>, <a href="https://wiki.archlinux.org/title/Initramfs" title="Initramfs"><strong>Initramfs</strong></a>, <a href="https://wiki.archlinux.org/title/Microcode" title="Microcode"><strong>Microcode</strong></a> and <strong>Firmware</strong> to your <a href="https://wiki.archlinux.org/title/TFTP" title="TFTP"><strong>TFTP</strong></a> setup.</li>
</ul>
<p style="page-break-after: always"></p>
<h3 data-number="2.1" id="image-types"><span class="header-section-number">2.1</span> <strong>ISO / Initramfs / UKI Types</strong></h3>
<table>
<thead>
<tr class="header">
<th>Type</th>
<th>RAM<br>to boot</th>
<th>WiFi<br>support</th>
<th>LAN<br>support</th>
<th>Package cache<br>for installation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong><em>date</em></strong></td>
<td>600M</td>
<td class="MyYes">&#10004;</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td><strong><em>date</em>-latest</strong></td>
<td>2100M</td>
<td class="MyNo">&#10006;</td>
<td class="MyOpt">local DHCP<br>server needed</td>
<td class="MyOpt">&gt;= 4G RAM<br>needed</td>
</tr>
<tr class="odd">
<td><strong><em>date</em>-local</strong></td>
<td>3000M</td>
<td class="MyYes">&#10004;</td>
<td class="MyYes">&#10004;</td>
<td class="MyYes">&#10004;</td>
</tr>
</tbody>
</table>
<ul>
<li>During boot, all <strong>ethernet</strong> network interfaces will try to obtain an IP address through <a href="https://wiki.archlinux.org/title/Network_configuration#DHCP" title="DHCP"><strong>DHCP</strong></a>, <strong>except</strong> -local image files.</li>
<li><strong>With</strong> a fast <strong>ethernet</strong> internet connection <strong>and</strong> a running <a href="https://wiki.archlinux.org/title/DHCP" title="DHCP"><strong>DHCP</strong></a> server, go for the <strong>latest</strong> image. If your system holds at least 4G RAM the package cache will be preserved.</li>
<li><strong>Without</strong> an internet connection you should use the <strong>local</strong> image. It includes a <strong>local package repository</strong> for installation. It will <strong>not</strong> use any network interfaces/services, until you explicitly switch to <strong>Online</strong> mode.</li>
</ul>
<h3 data-number="2.2" id="ipxe-boot"><span class="header-section-number">2.2</span> <strong>Netboot - IPXE</strong></h3>
<ul>
<li>Archboot provides <strong>precompiled</strong> <a href="https://ipxe.org" title="IPXE"><strong>IPXE</strong></a> binaries.</li>
<li>Download them <a href="https://ipxe.archboot.com/ipxe" title="Archboot IPXE"><strong>here</strong></a> or install them with the <a href="https://gitlab.archlinux.org/tpowa/archboot-repository/-/tree/main/archboot-ipxe" title="archboot-ipxe"><strong>archboot-ipxe</strong></a> package.</li>
<li>Launch the <strong>&lt;EFI&gt;</strong> file from your UEFI firmware, favourite bootloader, or PXE setup.</li>
<li> The <strong>ISO</strong> files include <a href="https://ipxe.org" title="IPXE"><strong>IPXE</strong></a> as <strong>Grub</strong> menu option.</li>
<li><a href="https://ipxe.org" title="IPXE"><strong>IPXE</strong></a> will <strong>verify</strong> and will <strong>only</strong> accept downloads signed with <strong>Archboot's IPXE signature</strong>.
</ul>
<p style="page-break-after: always"></p>
<h3 data-number="2.3" id="boot-modes"><span class="header-section-number">2.3</span> <strong>Boot Modes</strong></h3>
<table>
<thead>
<tr class="header">
<th>Boot Mode</th>
<th>AARCH64</th>
<th>RISCV64</th>
<th>X86_64</th>
</tr>
</thead>
<tbody>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a><br>with the included<br><strong>fedora</strong> signed <a href="https://wiki.archlinux.org/title/Secure_Boot#shim" title="Secure Boot"><strong>shim</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/UEFI" title="UEFI"><strong>UEFI</strong></a>/UEFI_CD<br>booting with <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a><br> or Netboot - <a href="https://ipxe.org" title="IPXE"><strong>IPXE</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><strong>UEFI_MIX*</strong><br>booting with <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a><br>or Netboot - <a href="https://ipxe.org" title="IPXE"><strong>IPXE</strong></a></td>
<td class="MyNo">&#10006;</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/MBR" title="MBR"><strong>MBR</strong></a> BIOS<br>with <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a></td>
<td class="MyNo">&#10006;</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/MBR" title="MBR"><strong>MBR</strong></a><br>with <a href="https://www.denx.de/wiki/U-Boot" title="U-Boot"><strong>U-Boot</strong></a></td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
</tbody>
</table>
<p>* Firmware 32bit / OS 64bit</p>
<h3 data-number="2.4" id="writing-to-usb-cd"><span class="header-section-number">2.4</span> <strong>ISO Writing To USB / CD</strong></h3>
<p>A hybrid image file is a standard CD/DVD-burnable image and also a raw disk image.</p>
<ul>
<li>Can be burned to CD/DVD(RW) media using most <a href="https://wiki.archlinux.org/title/CD_Burning" title="CD Burning"><strong>CD Burning</strong></a> utilities.</li>
<li>Can be raw-written to a drive using <a href="https://wiki.archlinux.org/title/Dd" title="Dd"><strong>dd</strong></a> or similar utilities.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Use this command with USB thumb drive:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># dd if=&lt;image&gt; of=/dev/&lt;device&gt; bs=1M</code></td>
</tr>
</tbody>
</table>
<ul>
<li>In <a href="https://rufus.ie" title="Rufus for Windows"><strong>Rufus for Windows</strong></a> use <strong>dd-Mode</strong> to write the image.</li>
<li><strong>Power users</strong> might consider using a <a href="https://www.ventoy.net" title="ventoy"><strong>Ventoy</strong></a> boot stick. One stick to boot everything, without reformat the stick all the time.</li>
</ul>
<p style="page-break-after: always"></p>
<h2 data-number="3" id="archboot-in-a-nutshell"><span class="header-section-number">3.</span> Features In A Nutshell</h2>
<h3 data-number="3.1" id="secure-boot-support"><span class="header-section-number">3.1</span> <strong>Secure Boot - MOK / Machine Owner Key</strong></h3>
<table>
<thead>
<tr class="header">
<th class="MyNo">Caveat:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="MyOpt"><ul><li>This method is intended to use for <a href="https://wiki.archlinux.org/title/Dual_boot" title="Dual boot"><strong>dual booting</strong></a> with <strong>Windows</strong>, without losing the <a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a> benefits for <strong>Windows</strong>.</li>
<li>This method will <strong>not</strong> make your system <strong>more</strong> secure.</li>
<li>It installs the <strong><a href="https://kojipkgs.fedoraproject.org/packages/shim/" title="Fedora Shim">fedora's signed shim</a></strong>, which is <strong>not</strong> controlled by Arch Linux and <strong>breaks</strong> the concept of <a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a> as is.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Please read <a href="https://www.rodsbooks.com/efi-bootloaders/secureboot.html#initial_shim"><strong>Roderick Smith’s guide</strong></a> for initial shim setup first.</p>
<p>The included tools for key management: <strong>efitools, mokutil, sbctl, sbsigntools</strong> and <strong>mkkeys.sh</strong></p>
<h4 data-number="3.1.1" id="secure-iso-boot"><span class="header-section-number">3.1.1</span> <strong>Secure Boot - ISO Booting</strong></h4>
<p>On initial <a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a> setup MOK manager is launched:</p>
<table>
<thead>
<tr class="header">
<th>Add the <strong>hash</strong> of <strong>grub</strong> and <strong>kernel</strong> from ISO in MOK manager:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>/EFI/BOOT/GRUB&lt;ARCH&gt;.EFI</strong> and <strong>/boot/vmlinuz-&lt;ARCH&gt;</strong></td>
</tr>
</tbody>
</table>
<h4 data-number="3.1.2" id="secure-boot-auto-setup"><span class="header-section-number">3.1.2</span> <strong>Secure Boot - Automatic Setup Routine</strong></h4>
<p>The setup script supports the following <a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a> layout:</p>
<ul>
<li>The <strong><a href="https://kojipkgs.fedoraproject.org/packages/shim/" title="Fedora Shim">fedora's signed shim</a></strong> is copied to the installed system</li>
<li>Creating of new keys is supported</li>
<li>Using existing keys from <strong>/etc/secureboot/keys</strong> in layout <strong>secureboot-keys.sh</strong> produces</li>
<li>MOK setup is done with personal MOK keys</li>
<li>Adding a pacman hook for automatic signing with personal keys</li>
<li>On <strong>first</strong> boot you need to <strong>enroll</strong> the used personal key as <strong>MOK</strong>.</li>
<li>Then your installed system is dual boot <strong>ready</strong>.</li>
</ul>
<h4 data-number="3.1.3" id="secure-boot-manual-create-mok"><span class="header-section-number">3.1.3</span> <strong>Secure Boot - Manual Create MOK</strong></h4>
<table>
<thead>
<tr class="header">
<th>Create and backup your own keys with Microsoft certificates:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># secureboot-keys.sh -name=&lt;yournametoembed&gt; &lt;directory&gt;</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<h4 data-number="3.1.4" id="secure-boot-reset-mok"><span class="header-section-number">3.1.4</span> <strong>Secure Boot - Reset MOK</strong></h4>
<p>In order to <strong>reset</strong> the MOK setup:</p>
<ul>
<li>Turn <strong>off</strong> Secure Boot in firmware</li>
<li>Boot the system and use <strong>mokutil</strong> to reset the setup.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Reset MOK:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># mokutil --reset</code></td>
</tr>
</tbody>
</table>
<ul>
<li>Reboot and turn <strong>on</strong> Secure Boot again in firmware.</li>
<li>Start again at point <a href="#secure-iso-boot"><strong>3.1.1</strong></a>.</li>
</ul>
<h3 data-number="3.2" id="terminal-access"><span class="header-section-number">3.2</span> <strong>Terminal Access</strong></h3>
<h4 data-number="3.2.1" id="vitual-console"><span class="header-section-number">3.2.1</span> <strong>Virtual Consoles - VCs</strong></h4>
<table>
<thead>
<tr class="header">
<th></th>
<th>VC 1-4</th>
<th>VC 5</th>
<th>VC 6</th>
<th>VC 11</th>
<th>VC 12</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Usage</strong></td>
<td>Login<br>Consoles</td>
<td><a href="https://github.com/imsnif/bandwhich" title="Network Status"><strong>Network<br>Status</strong></a></td>
<td><a href="https://github.com/ClementTsang/bottom" title="System Status"><strong>System<br>Status</strong></a></td>
<td>Log<br>Messages</td>
<td><a href="https://wiki.archlinux.org/title/Journal" title="Systemd Journal"><strong>Systemd<br>Journal</strong></a></td>
</tr>
<tr class="even">
<td><strong>Terminal Keys</strong></td>
<td>ALT+F1-F4</td>
<td>ALT+F5</td>
<td>ALT+F6</td>
<td>ALT+F11</td>
<td>ALT+F12</td>
</tr>
<tr class="odd">
<td><strong>Graphical Keys</strong></td>
<td>CTRL+ALT<br>+F1-F6</td>
<td>CTRL+ALT<br>+F5</td>
<td>CTRL+ALT<br>+F6</td>
<td>CTRL+ALT<br>+F11</td>
<td>CTRL+ALT<br>+F12</td>
</tr>
</tbody>
</table>
<p>Use left/right <strong>SUPER</strong> | <strong>Windows</strong> | <strong>Command</strong> | <strong>Search</strong> | <strong>Apple</strong> key or <strong>ALT</strong>+<strong>&loarr;</strong> or <strong>ALT</strong>+<strong>&roarr;</strong> to toggle <a href="https://wiki.archlinux.org/title/Linux_console" title="Linux_console"><strong>consoles</strong></a>.
</p>
<h4 data-number="3.2.2" id="serial-console"><span class="header-section-number">3.2.2</span> <strong>Serial Console</strong></h4>
<p><a href="https://wiki.archlinux.org/title/Serial_console" title="Serial console"><strong>Serial console</strong></a> is enabled on <strong>ttyS0</strong>, <strong>ttyAMA0</strong> and <strong>ttyUSB0</strong>.</p>
<p style="page-break-after: always"></p>
<h3 data-number="3.3" id="remote-terminal-access"><span class="header-section-number">3.3</span> <strong>Remote Terminal Access</strong></h3>
<h4 data-number="3.3.1" id="remote-access-openssh"><span class="header-section-number">3.3.1</span> <strong>OpenSSH Terminal</strong></h4>
<p>Access the terminal with <a href="https://wiki.archlinux.org/title/OpenSSH" title="Remote Connection"><strong>OpenSSH</strong></a>. The port number is <strong>Arch</strong> in numbers.</p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Default Key</strong></td>
<td>embedded in <strong>Release.txt</strong> or <br><strong><code>$ /etc/archboot/ssh/archboot-key</code></strong></td>
</tr>
<tr class="even">
<td><strong>Default Passphrase</strong></td>
<td>Archboot</td>
</tr>
<tr class="odd">
<td><strong>Port</strong></td>
<td>11838</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>Connect with ssh as root user (don't touch users known_hosts file):</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ ssh -i &lt;yourkeyfile&gt; -p 11838 -o StrictHostKeychecking=no \
-o UserKnownHostsFile=/dev/null root@archboot.local</code></td>
</tr>
</tbody>
</table>
<p><a href="https://wiki.archlinux.org/title/GNU_Screen" title="GNU_screen"><strong>GNU screen</strong></a> is launched on login and <strong>last</strong> session will be reattached.</p>
<h4 data-number="3.3.2" id="remote-access-ttyd"><span class="header-section-number">3.3.2</span> <strong>HTTP Browser Terminal - TTYD</strong></h4>
<ul>
<li>Access the <a href="https://github.com/tsl0922/ttyd" title="ttyd"><strong>ttyd</strong></a> terminal in your <strong>browser</strong>.</li>
<li><strong>Attention:</strong> The connection is <strong>not</strong> encrypted!</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Favourite Browser</strong></td>
<td><a href="http://archboot.local:7681" title="ttyd-address"><strong>archboot.local:7681</strong></a></td>
</tr>
<tr class="even">
<td><strong>Default Passphrase</strong></td>
<td>Archboot</td>
</tr>
</tbody>
</table>
<p><a href="https://wiki.archlinux.org/title/GNU_Screen" title="GNU_screen"><strong>GNU screen</strong></a> is launched on login and <strong>last</strong> session will be reattached.</p>
<p style="page-break-after: always"></p>
<h3 data-number="3.4" id="interactive-basic-setup"><span class="header-section-number">3.4</span> <strong>Interactive Basic Setup</strong></h3>
<p>The interactive <strong>scripts</strong> are launched on <strong>first</strong> login.</p>
<h4 data-number="3.4.1" id="localization"><span class="header-section-number">3.4.1</span> <strong>Localization</strong></h4>
<p>Your <a href="https://wiki.archlinux.org/title/Locale" title="Locale"><strong>locale</strong></a>, <a href="https://wiki.archlinux.org/title/Console_fonts" title="Console fonts"><strong>console font</strong></a> and <a href="https://wiki.archlinux.org/title/Keymap" title="Keymap"><strong>keymap</strong></a> will be configured by the <strong>localize</strong> script.</p>
<h4 data-number="3.4.2" id="network"><span class="header-section-number">3.4.2</span> <strong>Network Configuration (Online Mode)</strong></h4>
<ul>
<li>Your network will be configured by the <strong>network</strong> script.</li>
<li>Your <a href="https://wiki.archlinux.org/title/Network" title="Network"><strong>network</strong></a> will be configured by <strong><a href="https://wiki.archlinux.org/title/systemd-networkd" title="Systemd-Networkd">systemd-networkd</a></strong>.</li>
<li>Your <strong>wifi network</strong> will be authentificated by <strong><a href="https://wiki.archlinux.org/title/iwd" title="iwd">iwd</a></strong>.</li>
</ul>
<h4 data-number="3.4.3" id="clock"><span class="header-section-number">3.4.3</span> <strong>Clock Configuration</strong></h4>
<ul>
<li>Your <a href="https://wiki.archlinux.org/title/Timezone" title="Timezone"><strong>timezone</strong></a> and <a href="https://wiki.archlinux.org/title/Date" title="Date"><strong>date</strong></a> will be configured by the <strong>clock</strong> script.</li>
<li>In <strong>Online Mode</strong> the timezone will be configured by your <a href="http://ip-api.com" title="GeoIP"><strong>GeoIP</strong></a> and  <a href="https://wiki.archlinux.org/title/Systemd-timesyncd" title="timesyncd"><strong>timesyncd</strong></a> will be activated.</li>
</ul>
<h4 data-number="3.4.4" id="pacman"><span class="header-section-number">3.4.4</span> <strong>Pacman Setup (Online Mode)</strong></h4>
<p><a href="https://wiki.archlinux.org/title/Pacman" title="Pacman"><strong>Pacman</strong></a> will be configured by the <strong>pacsetup</strong> script.</p>
<ul>
<li>You will be asked if you want to activate the <a href="https://wiki.archlinux.org/title/Testing" title="Testing"><strong>testing</strong></a> repositories <strong>&lt;default=no&gt;</strong>.</li>
<li>Latest <a href="https://wiki.archlinux.org/title/Pacman" title="Pacman"><strong>pacman</strong></a> <a href="https://wiki.archlinux.org/title/Mirror" title="Mirror"><strong>mirrors</strong></a> will be <a href="http://ip-api.com" title="GeoIP"><strong>GeoIP</strong></a> synced and you have to select your <strong>favourite</strong> mirror.</li>
<li>If a new kernel is online available, you can decide to load the latest Archboot Environment <strong>&lt;default=no&gt;</strong>.</li>
</ul>
<p style="page-break-after: always"></p>
<h3 data-number="3.5" id="interactive-launcher"><span class="header-section-number">3.5</span> <strong>Interactive Launcher</strong></h3>
<ul>
<li>The interactive <strong>launcher</strong> script for quick navigation is launched on <strong>first</strong> login.</li>
<li>You can go straight to <strong>setup</strong>, launch <strong>desktop environment</strong>, do <strong>environment management</strong> or leave to <strong>shell</strong>.</li>
</ul>
<h4 data-number="3.5.1" id="desktop-environments"><span class="header-section-number">3.5.1</span> <strong>Launch Desktop Environment / Remote VNC Access</strong></h4>
<p><a href="https://wiki.archlinux.org/title/Gnome" title="Gnome"><strong>Gnome</strong></a>, <a href="https://wiki.archlinux.org/title/Plasma" title="Plasma"><strong>Plasma</strong></a>, <a href="https://wiki.archlinux.org/title/Sway" title="Sway"><strong>Sway</strong></a> and <a href="https://wiki.archlinux.org/title/Xfce" title="XFCE"><strong>Xfce</strong></a> are supported.</p>
<ul>
<li>On <a href="https://wiki.archlinux.org/title/Xorg" title="Xorg"><strong>Xorg</strong></a> environments <a href="https://wiki.archlinux.org/title/VNC" title="VNC"><strong>VNC</strong></a> is automatically launched.
<ul>
<li><a href="https://wiki.archlinux.org/title/Edit" title="Edit"><strong>Edit</strong></a> <strong>/etc/archboot/defaults</strong> to change default vnc password.</li>
</ul></li>
<li>On <a href="https://wiki.archlinux.org/title/Wayland" title="Wayland"><strong>Wayland</strong></a> environments <a href="https://wiki.archlinux.org/title/VNC" title="VNC"><strong>VNC</strong></a> is <strong>only</strong> available in <strong>Sway</strong>.
<ul>
<li>On <strong>MacOS/Windows</strong> you can use <a href="https://www.realvnc.com/en/connect/download/viewer/" title="RealVNC"><strong>RealVNC</strong></a> for passwordless login.</li>
</ul>
</li></ul>
<table>
<thead>
<tr class="header">
<th></th>
<th>VNC Client</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Connect</strong></td>
<td><code>archboot.local</code></td>
</tr>
<tr class="even">
<td><strong>Xorg Password</strong></td>
<td><code>archboot</code></td>
</tr>
<tr class="even">
<td><strong>Wayland Password</strong></td>
<td><code>&lt;none&gt;</code></td>
</tr>
</tbody>
</table>
<h4 data-number="3.5.2" id="manage-archboot-environment"><span class="header-section-number">3.5.2</span> <strong>Manage Archboot Environment</strong></h4>
<h5 data-number="3.5.2.1" id="full-arch-linux-system"><span class="header-section-number">3.5.2.1</span> <strong>Full Arch Linux System</strong></h5>
<ul>
<li>The <strong>Archboot</strong> system is stripped down to <strong>minimal</strong> space usage.</li>
<li>Though <strong>perl, python, man/info pages, includes, additional kernel modules (eg. sound)</strong> and other things are <strong>not</strong> provided by default.</li>
<li>This will also <strong>stop</strong> cleaning the system, while running other <strong>update</strong> tasks.</li>
</ul>
<h5 data-number="3.5.2.2" id="update-archboot-environment"><span class="header-section-number">3.5.2.2</span> <strong>Update Archboot Environment</strong></h5>
<ul>
<li>The <strong>Archboot Environment</strong> will be updated to <strong>latest</strong> packages.</li>
<li>Depending on the available <strong>RAM</strong>, you will get the new system with <strong>or</strong> without package cache.</li>
<li>The new system will be booted through <a href="https://wiki.archlinux.org/title/Kexec" title="kexec"><strong>kexec</strong></a>.</li>
</ul>
<h5 data-number="3.5.2.3" id="create-new-images"><span class="header-section-number">3.5.2.3</span> <strong>Create New Images</strong></h5>
<ul>
<li>You will get <strong>new</strong> images with <strong>latest</strong> packages.</li>
</ul>
<p style="page-break-after: always"></p>
<h3 data-number="3.6" id="interactive-setup"><span class="header-section-number">3.6</span> <strong>Interactive Setup</strong></h3>
<ul>
<li>The interactive <strong>setup</strong> script is used for installation.</li>
<li>You can run each menu point for doing the mentioned task.</li>
<li>You can cancel each running point by hitting <strong>CTRL-C</strong>.</li>
<li>If you do a fresh install, it is recommended to run each point in the order as presented.</li>
</ul>
<h4 data-number="3.6.1" id="prepare-storage-drive"><span class="header-section-number">3.6.1</span> <strong>Prepare Storage Drive</strong></h4>
<ul>
<li>You prepare your storage drive, <a href="https://wiki.archlinux.org/title/Filesystems" title="Filesystems"><strong>filesystems</strong></a> and define your mountpoints.</li>
<li>Quick Setup, manual <a href="https://wiki.archlinux.org/title/Partitioning" title="Partitioning"><strong>partitioning</strong></a>, <a href="https://wiki.archlinux.org/title/GUID" title="GUID"><strong>GUID</strong></a> (GPT) support, <a href="https://wiki.archlinux.org/title/MBR" title="MBR"><strong>MBR</strong></a> (BIOS) support, <a href="https://wiki.archlinux.org/title/Advanced_Format" title="Advanced Format"><strong>Advanced Format</strong></a> 4k sector drive support</li>
<li><a href="https://wiki.archlinux.org/title/Persistent_block_device_naming" title="Persistent block device naming"><strong>Persistent block device naming</strong></a> support: <a href="https://wiki.archlinux.org/title/PARTUUID" title="PARTUUID"><strong>PARTUUID</strong></a>, <a href="https://wiki.archlinux.org/title/PARTLABEL" title="PARTLABEL"><strong>PARTLABEL</strong></a>, <a href="https://www.freedesktop.org/software/systemd/man/latest/systemd-gpt-auto-generator.html" title="SD_GPT_AUTO_GENERATOR"><strong>SD_GPT_AUTO_GENERATOR</strong></a>, UUID, LABEL and KERNEL</li>
<li>Creation of software <a href="https://wiki.archlinux.org/title/RAID" title="RAID"><strong>RAID</strong></a>, RAID_partitions, <a href="https://wiki.archlinux.org/title/LVM" title="LVM"><strong>LVM</strong></a> devices and <a href="https://wiki.archlinux.org/title/LUKS" title="LUKS"><strong>LUKS</strong></a> encrypted devices</li>
<li>Supports standard linux, <a href="https://wiki.archlinux.org/title/RAID" title="RAID"><strong>RAID</strong></a>, RAID_partitions, <a href="https://wiki.archlinux.org/title/Fakeraid" title="Fakeraid"><strong>dmraid/fakeraid</strong></a>, <a href="https://wiki.archlinux.org/title/LVM" title="LVM"><strong>LVM</strong></a> and <a href="https://wiki.archlinux.org/title/LUKS" title="LUKS"><strong>LUKS</strong></a> encrypted devices</li>
<li>Filesystem support: <a href="https://wiki.archlinux.org/title/Btrfs" title="BTRFS"><strong>BTRFS</strong></a>, <a href="https://wiki.archlinux.org/title/Ext4" title="EXT4"><strong>Ext4</strong></a>, <a href="https://wiki.archlinux.org/title/XFS" title="XFS"><strong>XFS</strong></a>, <a href="https://wiki.archlinux.org/title/VFAT" title="VFAT"><strong>VFAT</strong></a></li>
</ul>
<h4 data-number="3.6.2" id="install-packages"><span class="header-section-number">3.6.2</span> <strong>Install Packages</strong></h4>
<ul>
<li>You can modify the packages to install in <strong>/etc/archboot/defaults</strong>.</li>
<li><a href="https://wiki.archlinux.org/title/Pacman" title="Pacman"><strong>Pacman</strong></a> will install the packages for the first boot to your storage drive.</li>
<li>Autoconfiguration of basic system will be done:<br> <a href="https://wiki.archlinux.org/title/Locale" title="Locale"><strong>Locale</strong></a>, <a href="https://wiki.archlinux.org/title/Linux_console" title="Linux_Console"><strong>Linux console</strong></a>, <a href="https://wiki.archlinux.org/title/Bash" title="Bash"><strong>Bash</strong></a>, <a href="https://wiki.archlinux.org/title/Linux_console/Keyboard_configuration" title="Keymap"><strong>Keymap</strong></a>, <a href="https://wiki.archlinux.org/title/System_time#Time_zone" title="Time_Zone"><strong>Timezone</strong></a>, <a href="https://wiki.archlinux.org/title/Fstab" title="Fstab"><strong>Fstab</strong></a>, <a href="https://wiki.archlinux.org/title/SSD" title="SSD"><strong>SSD performance</strong></a>, <a href="https://wiki.archlinux.org/title/Swap" title="Swap"><strong>Swap performance</strong></a>, <a href="https://wiki.archlinux.org/title/Systemd" title="Systemd"><strong>Systemd</strong></a>, <a href="https://wiki.archlinux.org/title/Pacman" title="Pacman"><strong>Pacman</strong></a>,  <a href="https://wiki.archlinux.org/title/systemd-networkd" title="Network"><strong>Network</strong></a>, <a href="https://wiki.archlinux.org/title/Crypttab" title="Crypttab"><strong>Crypttab</strong></a> and <a href="https://wiki.archlinux.org/title/Mdadm" title="Mdadm"><strong>Mdadm</strong></a></li>
</ul>
<h4 data-number="3.6.3" id="configure-system"><span class="header-section-number">3.6.3</span> <strong>Configure System</strong></h4>
<ul>
<li>You set the root <a href="https://wiki.archlinux.org/title/Password" title="Password"><strong>password</strong>.</a></li>
<li>Choose your early userspace setup: <strong>busybox</strong> or <strong>systemd</strong></li>
<li>Preconfiguration of <a href="https://wiki.archlinux.org/title/Mkinitcpio.conf" title="Mkinitcpio.conf"><strong>mkinitcpio.conf</strong></a> and <a href="https://wiki.archlinux.org/title/KMS" title="KMS"><strong>KMS</strong></a> mode is done by the <strong>hwdetect</strong> script</li>
<li>Choose your text editor: <a href="https://wiki.archlinux.org/title/nano" title="nano"><strong>Nano</strong></a> or <a href="https://wiki.archlinux.org/title/neovim" title="neovim"><strong>Neovim</strong></a></li>
<li>Configuration of basic system:<br><a href="https://wiki.archlinux.org/title/Users_and_groups" title="User Management"><strong>User Management</strong></a>, <a href="https://wiki.archlinux.org/title/Linux_console" title="Linux console"><strong>Linux console</strong></a>, <a href="https://wiki.archlinux.org/title/Locale.conf" title="Locale.conf"><strong>locale.conf</strong></a>,  <a href="https://wiki.archlinux.org/title/Locale" title="Locale"><strong>Locale</strong></a>, <a href="https://wiki.archlinux.org/title/Fstab" title="Fstab"><strong>fstab</strong></a>, <a href="https://wiki.archlinux.org/title/Mkinitcpio.conf" title="Mkinitcpio.conf"><strong>mkinitcpio.conf</strong></a>, <a href="https://wiki.archlinux.org/title/Modprobe.conf" title="Modprobe.conf"><strong>modprobe.conf</strong></a>, <a href="https://wiki.archlinux.org/title/Hostname" title="Hostname"><strong>hostname</strong></a>, <a href="https://wiki.archlinux.org/title/Resolv.conf" title="Resolv.conf"><strong>resolv.conf</strong></a>, <a href="https://wiki.archlinux.org/title/Hosts" title="Hosts"><strong>hosts</strong></a>, <a href="https://wiki.archlinux.org/title/Mirrors" title="Mirrors"><strong>mirrors</strong></a>, <a href="https://wiki.archlinux.org/title/Pacman.conf" title="Pacman.conf"><strong>pacman.conf</strong></a></li>
</ul>
<p style="page-break-after: always"></p>
<h4 data-number="3.6.4" id="install-bootloader"><span class="header-section-number">3.6.4</span> <strong>Install Bootloader</strong></h4>
<ul>
<li>You configure your preferred <a href="https://wiki.archlinux.org/title/Bootloader" title="Bootloader"><strong>bootloader</strong></a>.</li>
<li><a href="https://wiki.archlinux.org/title/Microcode" title="Microcode"><strong>Microcode</strong></a> and other needed programs will be installed automatically.</li>
<li><a href="https://wiki.archlinux.org/title/GPT" title="GPT"><strong>GPT</strong></a> <a href="https://wiki.archlinux.org/title/UEFI" title="UEFI"><strong>UEFI</strong></a> supported bootloaders:  <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a>, <a href="https://wiki.archlinux.org/title/Limine" title="Limine"><strong>Limine</strong></a>, <a href="https://wiki.archlinux.org/title/Refind-efi" title="Refind-efi"><strong>rEFInd</strong></a>, <a href="https://wiki.archlinux.org/title/Systemd-boot" title="Systemd-boot"><strong>Systemd-boot</strong></a>, <a href="https://wiki.archlinux.org/title/Unified_kernel_image" title="UKI"><strong>Unified Kernel Image</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/MBR" title="MBR"><strong>MBR</strong></a> BIOS supported bootloaders: <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a>, <a href="https://wiki.archlinux.org/title/Limine" title="Limine"><strong>Limine</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a> supports only shim signed by fedora with <a href="https://wiki.archlinux.org/title/GRUB" title="GRUB"><strong>GRUB</strong></a></li>
<li>The selected <a href="https://wiki.archlinux.org/title/Bootloader" title="Bootloader"><strong>bootloader</strong></a> will be installed to your system and you can modify the configuration file(s) afterwards.</li>
<li><a href="https://wiki.archlinux.org/title/Pacman#Hooks" title="Hooks"><strong> Pacman hooks</strong></a> for automatic bootloader upgrade will be enabled by default.</li>
</ul>
<h3 data-number="3.7" id="system-configuration"><span class="header-section-number">3.7</span> System Configuration On Installed System</h3>
<p>You can also run <strong>archboot-setup.sh</strong> for <strong>system configuration</strong> on an installed system.
<a href="#package-installation" title="Installation"><strong>Install</strong></a> your corresponding Archboot package for getting the <strong>archboot-setup.sh</strong> script.</p>
<p style="page-break-after: always"></p>
<h2 data-number="4." id="for-experts"><span class="header-section-number">4.</span> <strong>For Experts / Powerusers</strong></h2>
<h3 data-number="4.1" id="quickinst-installation"><span class="header-section-number">4.1</span> <strong> Quickinst Installation</strong></h3>
<ul>
<li>This script is for <strong>experts</strong>, who assemble the filesystems first and mount them in a directory.</li>
<li><strong>quickinst</strong> will autodetect the packages to install for a minimal system.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Quickinst experts installation:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># quickinst &lt;directory&gt;</code></td>
</tr>
</tbody>
</table>
<h3 data-number="4.2" id="cli-manage-archboot"><span class="header-section-number">4.2</span> <strong> CLI Manage Environment</strong></h3>
<p>You can always bump your image to <strong>latest</strong> available possibilities.</p>
<table>
<thead>
<tr class="header">
<th>For all options use:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># update -help</code></td>
</tr>
</tbody>
</table>
<h3 data-number="4.3" id="autorun"><span class="header-section-number">4.3</span> <strong> Custom Autorun Script</strong></h3>
<p>A custom autorun script at the end of bootup can be executed with the following options:</p>
<ul>
<li>Customization at runtime:<br>Remote scripts can be inserted with <strong>autorun=&lt;remotepath&gt;</strong> on bootloader commandline. Any remote path <strong>curl</strong> can handle is supported. Local image does <strong>not</strong> support that feature.</li>
<li>Customization at build time:<br><strong>/etc/archboot/run/autorun.sh</strong> will be inserted into the images.</li>
</ul>
<h3 data-number="4.4" id="automatic-install"><span class="header-section-number">4.4</span> <strong> Automatic Installation</strong></h3>
<ul>
<li>Archboot provides a <strong>template creation routine</strong> for automatic installations.</li>
<li>This provides an easy way to do <strong>mass installations</strong> through PXE on your network or with prepared media.</li>
<li>Simply finish <strong>one</strong> installation run on your favourite template system.
<li>All commands to setup your system will be saved to this file: <strong>/tmp/archboot-autorun.template</strong></li>
<li><strong>Save</strong> the created file and <strong>customize</strong> this template to your additional needs.</li>
<li>Afterwards run the script during boot by using <strong><a href="#autorun" title="custom autorun">custom autorun</a></strong> or by executing it by hand on booted media.</li>
<li>Here is an <strong><a href="./archboot-autorun.txt" title="template script">example template</a></strong>, to show how the result may look like.</li>
</ul>
<h3 data-number="4.5" id="tools-for-backup-and-copying-of-an-existing-system"><span class="header-section-number">4.5</span> <strong>Tools For Backup And Copying Of An Existing System</strong></h3>
<p>Archboot provides 2 additional scripts for doing those tasks.</p>
<ul>
</ul>
<table>
<thead>
<tr class="header">
<th>internal <a href="https://wiki.archlinux.org/title/Backup" title="Backup">backup</a> / copying using  <a href="https://wiki.archlinux.org/title/tar" title="tar">tar</a>:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># copy-mountpoint.sh -h</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>internal or external <a href="https://wiki.archlinux.org/title/Backup" title="Backup">backup</a> / copying using <a href="https://wiki.archlinux.org/title/rsync" title="rsync">rsync</a>:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># rsync-backup.sh -h</code></td>
</tr>
</tbody>
</table>
<h3 data-number="4.6" id="restoring-an-usb-device-to-fat32-state"><span class="header-section-number">4.6</span> <strong>Restoring An USB Device To FAT32 State</strong></h3>
<ul>
<li>When you have used the .iso image to create an USB installer, your USB stick is no longer useful for anything else.</li>
<li>Any remaining space on the stick (supposing you used a larger-than the .img file) is inaccessible.</li>
<li>Check carefully which device actually is your USB stick.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Attention: This will render all data on your device inaccessible!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># restore-usbstick.sh &lt;device&gt;</code></td>
</tr>
</tbody>
</table>
<h3 data-number="4.7" id="clean-blockdevice"><span class="header-section-number">4.7</span> Clean Blockdevice</h3>
<p>You can use <strong>clean-blockdevice.sh</strong> for cleaning partition table and filesystem signatures of any blockdevice.</p>
<table>
<thead>
<tr class="header">
<th>Attention: This will render all data on your device inaccessible!</th>
</tr>
</thead>
<tbody>
<tr><td><code>### clean partition table and filesystem signatures
# clean-blockdevice.sh &lt;device(s)&gt;</code></td></tr>
<tr><td><code>### Overwrite device with random numbers
# dd if=/dev/urandom of=&lt;device(s)&gt; status=progress bs=1M</code></td></tr>
<tr><td><code>### ATA Secure Erase SSD device
# hdparm --user-master u --security-set-pass secure &lt;device(s)&gt;
# hdparm --user-master u --security-erase secure &lt;device(s)&gt;
</code></td></tr>
<tr><td><code>### Erase NVME device
# nvme format -s1 &lt;device(s)&gt;</code></td></tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<h3 data-number="4.8" id="debug-early-userspace"><span class="header-section-number">4.8</span> Debug Early Userspace</h3>
<p>In order to debug the early userspace add <strong>archboot-early-debug</strong> on <strong>kernel commandline</strong>.
Mount <strong>/dev/zram0</strong> to <strong>/sysroot</strong> and analyze the rootfs or <strong>exit</strong> the bash shell to <strong>continue</strong> the boot process.</p>
<h2 data-number="5." id="faq-known-issues-and-limitations"><span class="header-section-number">5.</span> <strong>FAQ / Known Issues / Limitations</strong></h2>
<p>Please <strong>check</strong> the forum threads or project page for posted <strong>fixes</strong> and <strong>workarounds</strong>.</p>
<table>
<thead>
<tr class="header">
<th>Get latest fixes from GIT:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># update -update</code></td>
</tr>
</tbody>
</table>
<ul>
<li>The <strong>screen stays blank</strong> or other <strong>weird screen issues</strong> happen?<br>
Some hardware does not like the <a href="https://wiki.archlinux.org/title/KMS" title="KMS"><strong>KMS</strong></a> activation. Use <strong>one</strong> of the following <a href="https://wiki.archlinux.org/title/Kernel_parameters" title="Kernel parameters"><strong>kernel parameters</strong></a>:<br><strong><code>radeon.modeset=0</code>, <code>i915.modeset=0</code>, <code>amdgpu.modeset=0</code> or <code>nouveau.modeset=0</code></strong>
</li>
</ul>
<ul>
<li>Your system <strong>hangs</strong> during the <strong>boot process</strong>?<br>
<strong>Any</strong> combinations of the following <a href="https://wiki.archlinux.org/title/Kernel_parameters" title="Kernel parameters"><strong>kernel parameters</strong></a> may be useful:<br><strong><code>noapic</code>, <code>nolapic</code>, <code>acpi=off</code>, <code>pci=routeirq</code>, <code>pci=nosmp</code> or <code>pci=nomsi</code></strong>
</li>
</ul>
<ul>
<li><strong>Package</strong> XYZ is <strong>missing</strong> in Archboot Environment.<br>
<a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the missing package as needed.
For example, <a href="https://wiki.archlinux.org/title/Archinstall" title="Archinstall"><strong>archinstall</strong></a> is not included by default. It needs python3, which is a large dependency.
</li>
</ul>
<ul>
<li> <a href="https://www.ventoy.net" title="ventoy"><strong>Ventoy</strong></a> boot does not load kernel modules / errors out.<br>
<strong>Workaround</strong>: Do <strong>not</strong> store more than one Archboot ISO with the same kernel on disk.
</li>
</ul>
<ul>
<li><strong>Parallels Desktop</strong> might have <strong>keyboard</strong> issues.<br>
<strong>Workaround</strong>: Use <strong>COMMAND+TAB</strong> to switch out of the VM and reactivate the parallels window.
</li>
</ul>
<ul>
<li><strong>UTM</strong> does not work with <strong>Apple virtualization</strong>.<br>
The AARCH64 <strong>kernel </strong> does not seem to support this feature. This cannot be fixed on Archboot side.
</li>
</ul>
<ul>
<li><strong>dmraid</strong>/<a href="https://wiki.archlinux.org/title/Fakeraid" title="Fakeraid"><strong>fakeraid</strong></a>/<strong>biosraid</strong> might not work on some boards.<br>
<strong>mdadm</strong> only supports some <strong>isw</strong> and <strong>ddf</strong> fakeraid chipsets.
</li>
</ul>
<ul>
<li>How much <strong>RAM</strong> is needed to boot <strong>&lt;EFI&gt;</strong> or <strong>&lt;INITRD&gt;</strong>?<br>
The calculated size to boot the image follows the formula:<br>
<strong>Initramfs + Kernel + Unpackedkernel + Unpackedinitramfs = minimum RAM to boot</strong>
</li>
</ul>
<p style="page-break-after: always"></p>
<h2 data-number="6." id="archiso"><span class="header-section-number">6. </span>Comparison To Archiso Image</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>Archboot</th>
<th>Archiso</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Developer(s)</td>
<td><a href="https://archlinux.org/people/developers/#tpowa"><strong>tpowa</strong></a></td>
<td>arch-releng team</td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/Arch_Install_Scripts" title="Arch Install Scripts"><strong>Arch Install Scripts</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="#interactive-basic-setup" title="Interactive Basic Setup"><strong>Interactive Basic Setup</strong></a> / <a href="#interactive-setup" title="Installation"><strong>Installation</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/Archinstall" title="Archinstall"><strong>Archinstall</strong></a></td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Unified_kernel_image" title="UKI"><strong>Unified Kernel Image</strong></a><br>UKI system provided</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://ipxe.org" title="IPXE"><strong>Netboot - IPXE</strong></a> support</td>
<td class="MyYes">&#10004;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot MOK support</strong></a><br>with Microsoft certificates<br>supported by <strong><a href="https://kojipkgs.fedoraproject.org/packages/shim/" title="Fedora Shim">fedora's signed shim</a></strong></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/OpenSSH" title="Remote Connection"><strong>OpenSSH</strong></a> public key support</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>HTTP Browser Terminal - <a href="https://github.com/tsl0922/ttyd" title="ttyd"><strong>TTYD</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Systemd" title="Systemd"><strong>Systemd</strong></a> on early userspace</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Offline installation support<sup>1</sup></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Internal update feature</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Detect high resolution screen size</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Accessibility" title="Accessibility"><strong>Accessibility</strong></a> support</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Mobile_broadband_modem"><strong>Mobile broadband modem</strong></a><br>management service (modemmanager)</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="even">
<td>Disable <a href="https://wiki.archlinux.org/title/Network_configuration/Wireless" title="lastplace"><strong>WiFi</strong></a> Powersave</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Broadcom_wireless" title="broadcom-wl"><strong>Broadcom-wl</strong></a> module support</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td>EXT2/3, F2FS, JFS, NILFS support</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr class="odd">
<td>Default <a href="https://wiki.archlinux.org/title/Shell" title="Shell"><strong>Shell</strong></a> Switch<br><a href="https://wiki.archlinux.org/title/Bash" title="Bash"><strong>Bash</strong></a> or <a href="https://wiki.archlinux.org/title/Zsh" title="Zsh"><strong>Zsh</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td>Man/Info Pages</td>
<td class="MyOpt">&#9733;</td>
<td class="MyYes">&#10004;</td>
</tr>
<tr>
<td>Real Machine boot to prompt<sup>2</sup></td>
<td class="MyYes">47 seconds</td>
<td class="MyNo">79 seconds</td>
</tr>
<tr>
<td>Virtual Machine boot to prompt<sup>3</sup></td>
<td class="MyYes">17 seconds</td>
<td class="MyNo">21 seconds</td>
</tr>
<tr class="odd">
<td>Virtual Machine systemd-analyze<sup>3</sup></td>
<td class="MyYes">16 seconds</td>
<td class="MyNo">56 seconds</td>
</tr>
<tr class="odd">
<td>Minimum RAM to boot in MiB<sup>3</sup></td>
<td class="MyYes">600</td>
<td class="MyNo">620</td>
</tr>
<tr>
<td>Free RAM on system in MiB<sup>3</sup></td>
<td class="MyYes">3200</td>
<td class="MyNo">2500</td>
</tr>
<tr class="odd">
<td>Imagesize in MiB</td>
<td class="MyYes">366 - 1254</td>
<td class="MyNo">1357</td>
</tr>
<tr class="even">
<td>ROOTFS size in MiB</td>
<td class="MyYes">590</td>
<td class="MyNo">2000</td>
</tr>
<tr class="odd">
<td>ROOTFS packages</td>
<td class="MyYes">247</td>
<td class="MyNo">411</td>
</tr>
<tr class="even">
<td>ROOTFS Type</td>
<td><a href="https://wiki.archlinux.org/title/Btrfs" title="Btrfs"><strong>Btrfs</strong></a> on <a href="https://wiki.archlinux.org/title/Zram" title="ZRAM"><strong>ZRAM</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/SquashFS" title="Squashfs"><strong>Squashfs</strong></a></td>
</tr>
<tr class="even">
<td>Default <a href="https://wiki.archlinux.org/title/Command-line_shell" title="Shell"><strong>Shell</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/Bash" title="Bash"><strong>Bash</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/Zsh" title="Zsh"><strong>Zsh</strong></a></td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/nano" title="nano"><strong>Nano</strong></a> editor with syntax highlighting</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/neovim" title="neovim"><strong>Neovim</strong></a> editor with <a href="https://github.com/neovim/neovim/issues/16339" title="lastplace"><strong>lastplace</strong></a> plugin</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Show <a href="https://wiki.archlinux.org/title/Systemd/Journal" title="journal"><strong>journal</strong></a> on Virtual Console 12</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td>Enable windowkeys on Virtual Consoles</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/List_of_applications/Internet#IRC_clients" title="IRC client"><strong>IRC</strong></a> client</td>
<td><a href="https://github.com/osa1/tiny" title="Tiny"><strong>Tiny</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/irssi" title="Irssi"><strong>Irssi</strong></a></td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/List_of_applications/Internet#Web_browsers" title="Web browser"><strong>Web</strong></a> browser</td>
<td><a href="https://wiki.archlinux.org/title/Elinks" title="Elinks"><strong>Elinks</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/Lynx" title="Lynx"><strong>Lynx</strong></a></td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/List_of_applications/Internet#IRC_clients" title="IRC client"><strong>IRC</strong></a> client / <a href="https://wiki.archlinux.org/title/List_of_applications/Internet#Web_browsers" title="Web browser"><strong>Web</strong></a> browser preconfigured</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Chromium" title="Chromium"><strong>Chromium</strong></a> browser</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/Firefox" title="Firefox"><strong>Firefox</strong></a> browser</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Gparted" title="Gparted"><strong>GParted</strong></a> partitioner</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Gnome" title="Gnome"><strong>Gnome</strong></a> desktop</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/KDE" title="KDE/Plasma"><strong>KDE/Plasma</strong></a> desktop</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Sway" title="Xfce"><strong>Sway Wayland</strong></a> compositor</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="odd">
<td><a href="https://wiki.archlinux.org/title/Xfce" title="Xfce"><strong>Xfce</strong></a> desktop</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td><a href="https://wiki.archlinux.org/title/VNC" title="VNC"><strong>VNC</strong></a> installation support</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Rust CLI Tools:<br><a href="https://github.com/bdrung/3cpio" title="3cpio"><strong>3cpio</strong></a>, <a href="https://github.com/imsnif/bandwhich" title="bandwhich"><strong>bandwhich</strong></a>, <a href="https://github.com/sharkdp/bat" title="bat"><strong>bat</strong></a>, <a href="https://github.com/ClementTsang/bottom" title="bottom"><strong>bottom</strong></a>,<br><a href="https://github.com/theryangeary/choose" title="choose"><strong>choose</strong></a>, <a href="https://github.com/ogham/dog" title="dog"><strong>dog</strong></a>, <a href="https://github.com/bootandy/dust" title="dust"><strong>dust</strong></a>, <a href="https://github.com/Canop/dysk" title="dysk"><strong>dysk</strong></a>, <a href="https://eza.rocks" title="eza"><strong>eza</strong></a>, <a href="https://github.com/sharkdp/fd" title="fd"><strong>fd</strong></a>,<br><a href="https://github.com/junegunn/fzf" title="fzf"><strong>fzf</strong></a>, <a href="https://github.com/svenstaro/miniserve" title="miniserve"><strong>miniserve</strong></a>, <a href="https://crates.io/crates/netscanner" title="netscanner"><strong>netscanner</strong></a>, <a href="https://github.com/ouch-org/ouch" title="ouch"><strong>ouch</strong></a>,<br><a href="https://github.com/dalance/procs" title="procs"><strong>procs</strong></a>, <a href="https://github.com/BurntSushi/ripgrep"  title="ripgrep"><strong>ripgrep</strong></a>, <a href="https://github.com/RustScan/RustScan" title="rustscan"><strong>rustscan</strong></a>, <a href="https://github.com/chmln/sd" title="sd"><strong>sd</strong></a>,<br><a href="https://github.com/osa1/tiny" title="tiny"><strong>tiny</strong></a>, <a href="https://docs.rs/trippy/latest/trippy" title="trippy"><strong>trippy</strong></a>, <a href="https://github.com/ajeetdsouza/zoxide" title="zoxide"><strong>zoxide</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Default Font <a href="https://terminus-font.sourceforge.net" title="Terminus"><strong> Terminus</strong></a></td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Release build speed</td>
<td class="MyYes">4 min 58 sec<br>3 ISOs &amp; 3 UKIs</td>
<td class="MyNo">5 min 56 sec<br>1 ISO</td>
</tr>
<tr class="odd">
<td>Image assembling</td>
<td>grub-mkrescue</td>
<td>xorriso</td>
</tr>
<tr class="even">
<td>UEFI bootloader</td>
<td><a href="https://wiki.archlinux.org/title/Grub" title="Grub"><strong>Grub</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/Systemd-boot" title="Systemd-boot"><strong>Systemd-boot</strong></a></td>
</tr>
<tr class="even">
<td>BIOS bootloader</td>
<td><a href="https://wiki.archlinux.org/title/Grub" title="Grub"><strong>Grub</strong></a></td>
<td><a href="https://wiki.archlinux.org/title/Syslinux" title="Syslinux"><strong>Syslinux</strong></a></td>
</tr>
<tr class="odd">
<td>Reproducibility</td>
<td class="MyYes">&#10004;</td>
<td class="MyNo">&#10006;</td>
</tr>
<tr class="even">
<td>Easy custom live CD creation</td>
<td class="MyNo">&#10006;</td>
<td class="MyYes">&#10004;</td>
</tr>
</tbody>
</table>
<p> &#9733; Optional | <sup>1</sup> Only local image | <sup>2</sup> Acer R11 Chromebook 4GB RAM | <sup>3</sup> QEMU (4GB RAM, kvm and virtio backend), normal image</p>
<h2 data-number="7." id="development"><span class="header-section-number">7.</span> <strong>Development: GIT And Bugtracker</strong></h2>
<ul>
<li>GIT repository can be found at <a href="https://gitlab.archlinux.org/tpowa/archboot"><strong>Arch Linux Gitlab</strong></a> or <a href="https://github.com/tpowa/Archboot"><strong>Github</strong></a> .</li>
<li>Use the Arch Linux Gitlab <a href="https://gitlab.archlinux.org/tpowa/archboot/-/issues"><strong>Bugtracker</strong></a> for filling bugs.</li>
</ul>
<h2 data-number="8." id="package-installation"><span class="header-section-number">8.</span> <strong>Package - Repository / Installation / Usage</strong></h2>
<table>
<thead>
<tr class="header">
<th>Add <strong>archboot</strong> repository to /etc/pacman.conf:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[archboot]</code><br>
<code># United States</code><br>
<code>Server = https://pkg.archboot.com</code><br>
<code># Europe</code><br>
<code>Server = https://pkg.archboot.eu</code><br>
<code># Asia</code><br>
<code>Server = https://pkg.archboot.net</code><br>
</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <strong>archboot</strong> package on <strong>x86_64</strong> hardware.</li>
<li><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <strong>archboot-arm</strong> package on <strong>aarch64</strong> hardware.</li>
<li><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <strong>archboot-riscv</strong> package on <strong>riscv64</strong> hardware.</li>
<li><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <strong>qemu-user-static</strong> package for building <strong>aarch64</strong> or <strong>riscv64</strong> images on <strong>x86_64</strong> hardware.</li>
</ul>
<p>If you want to build <strong>aarch64</strong> or <strong>riscv64</strong> images replace <strong>x86_64</strong> with the architecture of your choice in the commands and files below.</p>
<h2 data-number="8.1" id="create-rescue-system"><span class="header-section-number">8.1</span> <strong>Create Rescue System Out Of The Running System</strong></h2>
<table>
<thead>
<tr class="header">
<th>Create the initramfs with your chosen profile:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-cpio.sh -c /etc/archboot/&lt;profile&gt;.conf -g initramfs.img</code></td>
</tr>
</tbody>
</table>
<p>Add your used <strong>kernel</strong> and <strong>initramfs</strong> to your bootloader.</p>
<p style="page-break-after: always"></p>
<h2 data-number="8.2" id="create-image-files"><span class="header-section-number">8.2</span> Create Image Files</h2>
<h3 data-number="8.2.1" id="requirements"><span class="header-section-number">8.2.1</span> <strong>Requirement</strong></h3>
<p>In order to build images you will need around <strong>3G</strong> free space on disk.</p>
<h3 data-number="8.2.2" id="create-image-files-without-modifications"><span class="header-section-number">8.2.2</span> <strong>Create Image Files Without Modifications</strong></h3>
<p>This script creates every installation media with latest available core/extra packages and boot/ directory with kernel and initramfs.</p>
<strong>Custom OpenSSH Key</strong>: Place your public key to <strong>/etc/archboot/ssh/archboot-key.pub</strong>
<table>
<thead>
<tr class="header">
<th>Building a new release:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-x86_64-release.sh &lt;directory&gt;</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>Rebuilding a release (reproducibility):</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># sed -n '12,19p' Release.txt >archboot.key<br># chmod 600 archboot.key<br># ssh-keygen -f archboot.key -y archboot-pub.key<br># Enter passphrase: Archboot<br># mv archboot{,-pub}.key /etc/archboot/ssh/<br># archboot-x86_64-release.sh &lt;directory&gt; \<br>  https://source.archboot.com/release/x86_64/latest/</code></td>
</tr>
</tbody>
</table>
<h3 data-number="8.2.3" id="create-image-files-with-modifications"><span class="header-section-number">8.2.3</span> <strong>Create Image Files With Modifications:</strong></h3>
<p>Explanation of the image tools / toolchain.</p>
<h4 data-number="8.2.3.1" id="archboot-x86_64-create-container.sh"><span class="header-section-number">8.2.3.1</span> <strong>archboot-x86_64-create-container.sh</strong></h4>
<table>
<thead>
<tr class="header">
<th>Create an Archboot container for image creation:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-x86_64-create-container.sh &lt;directory&gt;</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>To enter the container run:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># systemd-nspawn -D &lt;directory&gt;</code></td>
</tr>
</tbody>
</table>
<p>Modify your container to your needs. Then run <strong>archboot-x86_64-iso.sh</strong> for image creation in container.</p>
<p style="page-break-after: always"></p>
<h4 data-number="8.2.3.2" id="configuration-files-for-image-creation"><span class="header-section-number">8.2.3.2</span> <strong>Configuration Files For Image Creation:</strong></h4>
There are the following configuration files for ISO creation:
<ul>
<li><strong>/etc/archboot/defaults</strong>: defaults for packages, bootloader config and server setup.</li>
<li><strong>/etc/archboot/&lt;profile&gt;.conf</strong>: contains the _KERNEL and the _HOOKS, which are used for the initramfs.</li>
</ul>
<h4 data-number="8.2.3.3" id="archboot-cpio.sh"><span class="header-section-number">8.2.3.3</span> <strong>archboot-cpio.sh</strong></h4>
The Archboot initramfs toolchain uses its <strong>own</strong> cpio generator. Some differences to other initcpio creators:
<ul>
<li><strong>readelf</strong> is used for library detection. It's faster than ldd and objdump!</li>
<li>libraries for binaries outside of bin/ are <strong>not</strong> detected!</li>
<li>libraries outside of lib/ are <strong>not</strong> checked!</li>
<li><strong>tar</strong> is used for copying/renaming files and directories. It's faster than install and cp!</li>
<li><strong>mkdir</strong> is used for creating directories. It's faster than install!</li>
</ul>
<strong>Concatenated Cpio Initramfs Layout:</strong>
<p><a href="https://github.com/bdrung/3cpio" title="3cpio"><strong>3cpio</strong></a> can be used to examine/extract/list the initramfs files.</p>
<table>
<thead>
<tr class="header">
<th>Part</th>
<th>Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>1</strong></td>
<td>All directories</td>
</tr>
<tr class="even">
<td><strong>2</strong></td>
<td>All already compressed files</td>
</tr>
<tr class="odd">
<td><strong>3</strong></td>
<td>ZSTD compressed rootfs</td>
</tr>
</tbody>
</table>
Options supported in <strong>/etc/archboot/&lt;profile&gt;.conf</strong> files:<br>
<table>
<thead>
<tr class="header">
<th>Option</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>_KERNEL=""</td>
<td>defines used kernel</td>
<tr class="even">
<td>_HOOKS=()</td>
<td>Array that defines the used hooks</td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
Functions supported in <strong>/usr/lib/archboot/cpio/hooks/&lt;hook&gt;</strong> files:<br>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>_map &lt;function&gt; &lt;args&gt;</td>
<td>redo &lt;function&gt; on &lt;args&gt;</td>
<tr class="even">
<td>_dir &lt;directory&gt;</td>
<td>Only creates &lt;directory&gt; on &lt;rootfs&gt;</td>
</tr>
<tr class="odd">
<td>_full_dir  &lt;directory&gt;</td>
<td>Copies the &lt;full directory&gt; as is to &lt;rootfs&gt;</td>
</tr>
<tr class="even">
<td>_binary &lt;binary&gt;</td>
<td>Adds &lt;binary&gt; to rootfs, PATH is added,<br>libraries are detected, symlinks are resolved</td>
</tr>
<tr class="odd">
<td>_file &lt;file&gt;</td>
<td>Adds &lt;file&gt; as is to rootfs, symlinks are resolved</td>
</tr>
<tr class="even">
<td>_file_rename &lt;file&gt; &lt;file_rootfs&gt;</td>
<td>Adds &lt;file&gt; as is to rootfs &lt;file_rootfs&gt;</td>
</tr>
<tr class="odd">
<td>_symlink &lt;linkname&gt; &lt;linkedfile&gt;</td>
<td>Adds symlink &lt;linkname&gt; to &lt;linkedfile&gt; on &lt;rootfs&gt;</td>
</tr>
<tr class="even">
<td>_mod &lt;module&gt;</td>
<td>Adds kernel &lt;module&gt; to &lt;rootfs&gt;</td>
</tr>
<tr class="odd">
<td>_all_mods -f &lt;exclude_pattern&gt; &lt;pattern&gt;</td>
<td>Adds all kernel modules &lt;pattern&gt; to &lt;rootfs&gt;,<br>use -f flag to exclude modules</td>
</tr>
</tbody>
</table>
<h4 data-number="8.2.3.4" id="archboot-x86_64-iso.sh"><span class="header-section-number">8.2.3.4</span> <strong>archboot-x86_64-iso.sh</strong></h4>
<p>Script for ISO creation from running system or for use in Archboot container.</p>
<table>
<thead>
<tr class="header">
<th>ISO Type</th>
<th>Run command:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Normal</td>
<td><code># archboot-x86_64-iso.sh -g</code></td>
<tr class="even">
<td>Latest</td>
<td><code># archboot-x86_64-iso.sh -p=x86_64-latest -g</code></td>
</tr>
<tr class="odd">
<td>Local</td>
<td><code># archboot-x86_64-iso.sh -p=x86_64-local -g</code></td>
</tr>
</tbody>
</table>
<h4 data-number="8.2.3.5" id="archboot-x86_64-uki.sh"><span class="header-section-number">8.2.3.5</span> <strong>archboot-x86_64-uki.sh</strong></h4>
<p>Script for UKI creation from running system or for use in Archboot container.</p>
<table>
<thead>
<tr class="header">
<th>UKI Type</th>
<th>Run command:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Normal</td>
<td><code># archboot-x86_64-uki.sh -g</code></td>
<tr class="even">
<td>Latest</td>
<td><code># archboot-x86_64-uki.sh -p=x86_64-latest -g</code></td>
</tr>
<tr class="odd">
<td>Local</td>
<td><code># archboot-x86_64-uki.sh -p=x86_64-local -g</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<h2 data-number="8.3" id="setting-up-an-archboot-image-server"><span class="header-section-number">8.3.</span> Setting Up An Image Server</h2>
<h3 data-number="8.3.1" id="requirements-1"><span class="header-section-number">8.3.1</span> <strong>Requirements</strong></h3>
<ul>
<li>You have a normal user, which has access to a working gpg setup with own signature.</li>
<li>You have a normal user with ssh access to the server, on which the images should upload.</li>
<li>Add the directories on the remote server, you want to upload to.</li>
</ul>
<h3 data-number="8.3.2" id="configuration-file"><span class="header-section-number">8.3.2</span> <strong>Configuration File</strong></h3>
<p>You need to configure all your settings in the configuration file: <strong>/etc/archboot/defaults</strong></p>
<h3 data-number="8.3.3" id="running-commands"><span class="header-section-number">8.3.3</span> <strong>Running Commands</strong></h3>
<h4 data-number="8.3.3.1" id="IPXE-chain"><span class="header-section-number">8.3.3.1</span> <strong>IPXE - ROOT CA - Chain Of Trust (optional)</strong></h4>
<table>
<thead>
<tr class="header">
<th>Create the ROOT CA certs in directory: /etc/archboot/ipxe</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-ipxe-certs.sh run</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Build</strong> the <a href="https://gitlab.archlinux.org/tpowa/archboot-repository/-/tree/main/archboot-ipxe" title="archboot-ipxe"><strong>archboot-ipxe</strong></a> according to the comments in the <strong>PKGBUILD</strong> with the created certs.</li>
<li><strong>Install</strong> your custom <strong>archboot-ipxe</strong> bootloader package.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Edit /etc/pacman.conf to include:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>IgnorePkg = archboot-ipxe</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<h4 data-number="8.3.3.2" id="x86_64-architecture"><span class="header-section-number">8.3.3.2</span> <strong>X86_64 Architecture</strong></h4>
<table>
<thead>
<tr class="header">
<th>Create server release:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-x86_64-server-release.sh</code></td>
</tr>
</tbody>
</table>
<h4 data-number="8.3.3.3" id="aarch64riscv64-architecture"><span class="header-section-number">8.3.3.3</span> <strong>Aarch64/Riscv64 Architecture</strong></h4>
<ul>
<li>You have to skip the tarball creation step, on <strong>aarch64</strong> or <strong>riscv64</strong> hardware.</li>
<li><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <a href="https://archlinux.org/packages/?name=qemu-user-static"><strong>qemu-user-static</strong></a> package, for building on <strong>x86_64</strong> hardware.</li>
<li>On first time setup you need to create the pacman-aarch64-container tarball on <strong>x86_64</strong> hardware.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Create pacman container tarball:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-pacman-aarch64-container.sh &lt;build-directory&gt;</code></td>
</tr>
<tr class="even">
<td><code># archboot-pacman-riscv64-container.sh &lt;build-directory&gt;</code></td>
</tr>
</tbody>
</table>
<p>Afterwards you only have to run for each release:</p>
<table>
<thead>
<tr class="header">
<th>Create server release:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-aarch64-server-release.sh</code></td>
</tr>
<tr class="even">
<td><code># archboot-riscv64-server-release.sh</code></td>
</tr>
</tbody>
</table>
<h4 data-number="8.3.3.4" id="automatic-server-update"><span class="header-section-number">8.3.3.4</span> <strong>Automatic Server Update</strong></h4>
<p>The <strong>/etc/archboot/server-update.conf</strong> file defines architectures and update trigger packages.</p>
<table>
<thead>
<tr class="header">
<th>Enable systemd timer at 02:00:00 AM:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># systemctl enable archboot-server-update.timer</code></td>
</tr>
<tr class="even">
<td><code># systemctl start archboot-server-update.timer</code></td>
</tr>
</tbody>
</table>
<p>You can skip the automatic generation, by adding a <strong>MASK</strong> file to the directory, which includes the containers.</p>
<p style="page-break-after: always"></p>
<h2 data-number="9" id="testing-image-and-files-with-qemu"><span class="header-section-number">9.</span> Testing Image And Files With QEMU</h2>
<p>You can run <a href="https://wiki.archlinux.org/title/QEMU" title="QEMU"><strong>QEMU</strong></a> tests at different stages of ISO creation.</p>
<h3 data-number="9.1" id="running-aarch64"><span class="header-section-number">9.1</span> <strong>Running AARCH64:</strong></h3>
<p><a href="https://wiki.archlinux.org/title/Install" title="Install"><strong>Install</strong></a> the <a href="https://archlinux.org/packages/?name=edk2-aarch64"><strong>edk2-aarch64</strong></a> package.</p>
<table>
<thead>
<tr class="header">
<th>UEFI GPT mode:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-aarch64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -boot d -bios /usr/share/edk2/aarch64/QEMU_EFI.fd \<br>-machine virt -cpu cortex-a57 -device virtio-gpu-pci \<br>-device nec-usb-xhci -device usb-tablet \<br>-device usb-kbd -m &lt;memory&gt; </code></td>
</tr>
</tbody>
</table>
<h3 data-number="9.2" id="running-riscv64"><span class="header-section-number">9.2</span> <strong>Running RISCV64:</strong></h3>
<table>
<thead>
<tr class="header">
<th>MBR mode:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-riscv64 -M virt \<br>-kernel /usr/share/archboot/u-boot/qemu-riscv64_smode/uboot.elf \<br>-device virtio-gpu-pci -device virtio-net-device,netdev=eth0 \<br>-netdev user,id=eth0,hostfwd=tcp::2222-:22 \<br>-device nec-usb-xhci -device usb-tablet -device usb-kbd \<br>-object rng-random,filename=/dev/urandom,id=rng \<br>-device virtio-rng-device,rng=rng \<br>-drive file=&lt;yourimage&gt;,if=virtio,format=raw -m &lt;memory&gt;</code></td>
</tr>
</tbody>
</table>
<p>Use <strong>ssh root@localhost -p 2222</strong> to connect to machine from your running host.</p>
<h3 data-number="9.3" id="running-x86_64"><span class="header-section-number">9.3</span> <strong>Running X86_64:</strong></h3>
<h4 data-number="9.3.1" id="uefi-gpt"><span class="header-section-number">9.3.1</span> <strong>Running Kernel, BIOS MBR, UEFI GPT Without Secure Boot:</strong></h4>
<table>
<thead>
<tr class="header">
<th>kernel and initramfs testing:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -kernel &lt;kernel&gt; -initrd &lt;initramfs&gt; \<br>-append &quot;rootfstype=ramfs&quot; \<br>-machine type=q35,accel=kvm -usb -usbdevice tablet -m &lt;memory&gt;</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<table>
<thead>
<tr class="header">
<th>BIOS MBR mode:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -usbdevice tablet -machine type=q35,accel=kvm -boot d -m &lt;memory&gt;</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>64bit UEFI / 64bit running system:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -usbdevice tablet -machine type=q35,accel=kvm -boot d \<br>-drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/x64/OVMF_CODE.4m.fd -m &lt;memory&gt;</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>32bit UEFI / 64bit running system:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -usbdevice tablet -machine type=q35,accel=kvm -boot d \<br>-drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/ia32/OVMF_CODE.4m.fd -m &lt;memory&gt; </code></td>
</tr>
</tbody>
</table>
<h4 data-number="9.3.2" id="uefi-gpt-secure-boot"><span class="header-section-number">9.3.2</span> <strong>UEFI GPT Secure Boot</strong></h4>
<table>
<thead>
<tr class="header">
<th>Copy OVMF_VARS.secboot_&lt;arch&gt;.fd to a place the user has access to it:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># cp /usr/share/archboot/ovmf/OVMF_VARS.secboot_x64.fd &lt;directory&gt;
# cp /usr/share/archboot/ovmf/OVMF_VARS.secboot_ia32.fd &lt;directory&gt;
</code></td>
</tr>
</tbody>
</table>
<p>The file already includes a basic set of keys from fedora ovmf package.</p>
<table>
<thead>
<tr class="header">
<th>64bit UEFI / 64bit running system:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -usbdevice tablet -boot d \<br>-drive if=pflash,format=raw,readonly=on,\<br>file=/usr/share/archboot/ovmf/OVMF_CODE.secboot_x64.fd \<br>-drive if=pflash,format=raw,file=OVMF_VARS.secboot_x64.fd \<br>-global driver=cfi.pflash01,property=secure,value=on \<br>-machine q35,smm=on,accel=kvm \<br>-global ICH9-LPC.disable_s3=1 -m &lt;memory&gt;</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<table>
<thead>
<tr class="header">
<th>32bit UEFI / 64bit running system:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$ qemu-system-x86_64 -drive file=&lt;isofile&gt;,if=virtio,format=raw \<br>-usb -usbdevice tablet -boot d \<br>-drive if=pflash,format=raw,readonly=on,\<br>file=/usr/share/archboot/ovmf/OVMF_CODE.secboot_ia32.fd \<br>-drive if=pflash,format=raw,file=OVMF_VARS.secboot_ia32.fd \<br>-global driver=cfi.pflash01,property=secure,value=on \<br>-machine q35,smm=on,accel=kvm \<br>-global ICH9-LPC.disable_s3=1 -m &lt;memory&gt; </code></td>
</tr>
</tbody>
</table>
<h3 data-number="9.4" id="additional-qemu-parameters"><span class="header-section-number">9.4</span> <strong>Additional Qemu Parameters</strong></h3>
<table>
<thead>
<tr class="header">
<th>KVM virtio network for tap0:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-device virtio-net,netdev=eth0 \<br>-netdev tap,id=eth0,ifname=tap0,script=no,downscript=no</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>KVM virtio harddisk:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-drive file=yourimagefile,if=virtio,format=raw</code></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>QXL Video device with 800x600 resolution:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-device qxl-vga,xres=800,yres=600</code></td>
</tr>
</tbody>
</table>
<h3 data-number="9.5" id="hwsim"><span class="header-section-number">9.5</span> <strong>Setting Up A Hwsim SSID</strong></h3>
<table>
<thead>
<tr class="header">
<th>Start a hwsid SSID for wireless testing purposes:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code># archboot-hwsim.sh &lt;SSID&gt;</code></td>
</tr>
</tbody>
</table>
<p style="page-break-after: always"></p>
<h2 data-number="10" id="arch-linux-wiki"><span class="header-section-number">10.</span> Arch Linux Wiki</h2>
<ul>
<li><a href="https://wiki.archlinux.org/title/Installation_Guide" title="Installation Guide"><strong>Installation Guide</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Improving_performance" title="Improving performance"><strong>Improving performance</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Dual_boot" title="Dual boot"><strong>Dual boot</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Secure_Boot" title="Secure Boot"><strong>Secure Boot</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Unified_kernel_image" title="Unified Kernel Image / UKI"><strong>Unified Kernel Image / UKI</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Serial_console" title="Serial console"><strong>Serial console</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Parallels_Desktop" title="Parallels Desktop"><strong>Parallels Desktop</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/QEMU" title="QEMU"><strong>QEMU</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/VirtualBox" title="VirtualBox"><strong>VirtualBox</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/VMware" title="VMware"><strong>VMware</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Gnome" title="Gnome"><strong>Gnome</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/KDE" title="KDE/Plasma"><strong>KDE/Plasma</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Xfce" title="Xfce"><strong>Xfce</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/VNC" title="VNC"><strong>VNC</strong></a></li>
<li><a href="https://wiki.archlinux.org/title/Wayland" title="Wayland"><strong>Wayland</strong></a></li>
</ul>
<h2 data-number="11" id="project-links"><span class="header-section-number">11.</span> Project Links</h2>
<ul>
<li><a href="https://www.reddit.com/r/archboot"><strong>Blog</strong></a></li>
<li><a href="https://gitlab.archlinux.org/tpowa/archboot"><strong>Development</strong></a></li>
<li><a href="https://release.archboot.com"><strong>Download</strong></a>
<li><a href="gallery.html" target="_blank"><strong>Screenshots</strong></a></li>
<li><a href="https://source.archboot.com"><strong>Build Sources</strong></a></li>
<li><a href="https://gitlab.archlinux.org/tpowa/archboot-repository"><strong>Repository</strong></a></li>
</ul>
<h2 data-number="12" id="videos"><span class="header-section-number">12.</span> Videos</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=2r0SG2XTaQQ"><strong>VMware Fusion on Macbook M1</strong></a></li>
<li><a href="https://www.youtube.com/watch?v=xo_PlJHloqk"><strong>Parallels installation on Macbook M1</strong></a></li>
<li><a href="https://www.youtube.com/watch?v=cOobSmI-XgA"><strong>UTM installation on Macbook M1</strong></a></li>
<li><a href="https://www.youtube.com/watch?v=mb3ykTklnWU"><strong>Running local image</strong></a></li>
</ul>
<p style="page-break-after: always"></p>
<h2 data-number="13" id="history"><span class="header-section-number">13.</span> History</h2>
<ul>
<li>Official <a href="https://archlinux.org/"><strong>Arch Linux</strong></a> install medium from <strong>Release 0.7</strong> till <strong>2008.03</strong>.</li>
<li>Provided <strong>i686</strong> and <strong>x86_64</strong> on one ISO until <strong>2018</strong>.</li>
<li>Since 10-2021 <strong>Secure Boot</strong> support.</li>
<li>Since 01-2022 <strong>aarch64</strong> support.</li>
<li>Since 10-2022 <strong>riscv64</strong> support.</li>
<li>Since 03-2025 <strong>Netboot - IPXE</strong> support.</li>
</ul>
<h2 data-number="14" id="references"><span class="header-section-number">14.</span> References</h2>
<ul>
<li><a href="https://www.kraxel.org/blog/2019/09/display-devices-in-qemu/"><strong>Qemu display devices</strong></a></li>
<li><a href="https://colatkinson.site/linux/riscv/2021/01/27/riscv-qemu/"><strong>Qemu on RISC-V</strong></a></li>
</ul>
</body>
</html>
